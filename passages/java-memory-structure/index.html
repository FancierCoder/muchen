<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://static.muchen.fun/images/touch-icon.png"><link rel="icon" href="https://static.muchen.fun/images/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="沐晨"><meta name="keywords" content="个人博客,个人见解,Java,Spring,IT,程序员,编程,技术,SpringBoot,JavaScript,分享,博客,Blog"><meta name="description" content="之前了解了Java的内存模型，再来了解下Java的内存结构吧。"><meta property="og:type" content="article"><meta property="og:title" content="Java的内存结构"><meta property="og:url" content="https://muchen.fun/passages/java-memory-structure/index.html"><meta property="og:site_name" content="MuChen&#39;s Blog"><meta property="og:description" content="之前了解了Java的内存模型，再来了解下Java的内存结构吧。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://muchen-img.oss-cn-hongkong.aliyuncs.com/hexo-client/2019/12/18/a5328860-2164-11ea-b270-e1ada5ee6906.png"><meta property="og:image" content="https://muchen-img.oss-cn-hongkong.aliyuncs.com/hexo-client/2019/12/18/ce696dc0-2169-11ea-b270-e1ada5ee6906.png"><meta property="article:published_time" content="2019-12-18T07:30:59.000Z"><meta property="article:modified_time" content="2024-03-01T06:54:14.064Z"><meta property="article:author" content="沐晨"><meta property="article:tag" content="Java内存结构"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://muchen-img.oss-cn-hongkong.aliyuncs.com/hexo-client/2019/12/18/a5328860-2164-11ea-b270-e1ada5ee6906.png"><title>Java的内存结构 - MuChen&#39;s Blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var dntVal,Fluid=window.Fluid||{},CONFIG=(Fluid.ctx=Object.assign({},Fluid.ctx),{hostname:"muchen.fun",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!1,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:"b561ebd1192170893b7c07a8d4b71fc5",google:"UA-144841374-1",tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"O8vCwRAgytvziX1uG5WgRn8R-MdYXbMMI",app_key:"5Rl3Rhl9zc8BJNvrPcncKWFy",server_url:"https://lean.muchen.fun",path:"window.location.pathname",ignore_local:!0},gtag:null},search_path:"/local-search.xml",include_content_in_search:!0});CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>var _hmt;Fluid.ctx.dnt||(_hmt=_hmt||[],function(){var t=document.createElement("script"),e=(t.src="https://hm.baidu.com/hm.js?b561ebd1192170893b7c07a8d4b71fc5",document.getElementsByTagName("script")[0]);e.parentNode.insertBefore(t,e)}())</script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=",function(){function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","")})</script><meta name="generator" content="Hexo 7.1.1"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>沐晨</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://static.muchen.fun/picture/15.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Java的内存结构"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2019-12-18 15:30" pubdate>2019年12月18日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.5k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 22 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Java的内存结构</h1><p id="updated-time" class="note note-info" style="display:none">本文最后更新于 2024-03-01T14:54:14+08:00</p><div class="markdown-body"><!-- more --><p><code>Java</code> 的运行时数据区域分为五大数据区域。这些区域各有各的用途，创建及销毁时间。如下图所示，其中方法区和堆是所有线程共享的，虚拟机栈，本地方法栈和程序计数器则为线程私有的。<br><img src="https://muchen-img.oss-cn-hongkong.aliyuncs.com/hexo-client/2019/12/18/a5328860-2164-11ea-b270-e1ada5ee6906.png" srcset="/img/loading.gif" lazyload alt="image.png"><br>根据<code>Java</code>虚拟机规范，<code>Java</code>虚拟机管理的内存分为<strong>方法区、堆、虚拟机栈、本地方法栈、程序计数器栈</strong>五大区域。</p><h2 id="程序计数器-Program-Counter-Register"><a href="#程序计数器-Program-Counter-Register" class="headerlink" title="程序计数器(Program Counter Register)"></a>程序计数器(Program Counter Register)</h2><p>程序计数器是一块很小的内存空间，它是线程私有的，可以认作为当前线程的行号指示器。</p><p>在虚拟机的概念模型里,字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。由于<code>Java</code>虚拟机的多线程是通过线程轮流切换并分配处理器执行时间的方式来实现的，对于一个处理器(如果是多核<code>CPU</code>那就是一核)来说，在一个确定的时刻只会执行一条线程中的指令，而一条线程中有多个指令，为了线程切换可以恢复到正确执行位置，每个线程都需有独立的一个程序计数器，不同线程之间的程序计数器互不影响，独立存储。</p><p>如果线程执行的是个<code>Java</code>方法，那么计数器记录的是虚拟机字节码指令的地址。如果为<code>native</code>底层方法，那么计数器为空(<code>Undefined</code>)。这块内存区域是虚拟机规范中唯一没有<code>OutOfMemoryError</code>的区域。</p><h2 id="Java栈-虚拟机栈-Java-Virtual-Mechine-Stacks"><a href="#Java栈-虚拟机栈-Java-Virtual-Mechine-Stacks" class="headerlink" title="Java栈(虚拟机栈)(Java Virtual Mechine Stacks)"></a>Java栈(虚拟机栈)(Java Virtual Mechine Stacks)</h2><p><code>Java</code>栈同计数器也为线程私有，生命周期相同，就是平时说的栈，<strong>栈描述的是<code>Java</code>方法执行的内存模型</strong>。<br>每个方法被执行的时候都会创建一个<strong>栈帧</strong>用于<strong>存储局部变量表，操作栈，动态链接，方法出口</strong>等信息。每一个方法被调用的过程就对应一个栈帧在虚拟机栈中从入栈到出栈的过程。</p><blockquote><p>栈帧(<code>Stack Frame</code>): 是用来存储数据和部分过程结果的数据结构。<br>栈帧的位置: 内存 -&gt; 运行时数据区 -&gt; 某个线程对应的虚拟机栈 -&gt; <code>here</code><br>栈帧大小确定时间: 编译期确定，不受运行期数据影响。</p></blockquote><p>通常有人将<code>Java</code>内存区分为栈(<code>Stacks</code>)和堆(<code>Heap</code>)，实际上<code>Java</code>内存比这复杂，这么区分可能是因为我们最关注的与对象内存分配关系最密切的是这两个，平时说的栈一般就是指局部变量表。<br><img src="https://muchen-img.oss-cn-hongkong.aliyuncs.com/hexo-client/2019/12/18/ce696dc0-2169-11ea-b270-e1ada5ee6906.png" srcset="/img/loading.gif" lazyload alt="image.png"><br><strong>局部变量表</strong>: 一片连续的内存空间，用来存放方法参数，以及方法内定义的局部变量，存放着编译期间已知的数据类型(八大基本类型和对象引用(<code>reference</code>类型)，<code>returnAddress</code>类型。它的最小的局部变量表空间单位为<code>Slot</code>，虚拟机没有指明<code>Slot</code>的大小，但在<code>JVM</code>中，<code>long</code>和<code>double</code>类型数据明确规定为<code>64</code>位，这两个类型占<code>2</code>个<code>Slot</code>，其它基本类型固定占用<code>1</code>个<code>Slot</code>。</p><p><strong><code>reference</code>类型</strong>: 与基本类型不同的是它不等同本身，即使是<code>String</code>，内部也是<code>char</code>数组组成，它可能是指向一个对象起始位置指针，也可能指向一个代表对象的句柄或其他与该对象有关的位置。</p><p><strong><code>returnAddress</code>类型</strong>: 指向一条字节码指令的地址</p><p>需要注意的是，<strong>局部变量表所需要的内存空间在编译期完成分配，当进入一个方法时，这个方法在栈中需要分配多大的局部变量空间是完全确定的，在方法运行期间不会改变局部变量表大小</strong>。</p><p><code>Java</code>虚拟机栈可能出现两种类型的异常：</p><ul><li>线程请求的栈深度大于虚拟机允许的栈深度，将抛出<code>StackOverflowError</code>。</li><li>虚拟机栈空间可以动态扩展，当动态扩展是无法申请到足够的空间时，抛出<code>OutOfMemory</code>异常。</li></ul><h2 id="本地方法栈-Native-Method-Stack"><a href="#本地方法栈-Native-Method-Stack" class="headerlink" title="本地方法栈(Native Method Stack)"></a>本地方法栈(Native Method Stack)</h2><p>本地方法栈是与虚拟机栈发挥的作用十分相似，区别是虚拟机栈执行的是<code>Java</code>方法(也就是字节码)，而本地方法栈则为虚拟机使用到的<code>native</code>方法服务，可能底层会调用<code>C</code>或者<code>C++</code>，我们打开<code>jdk</code>安装目录可以看到也有很多用<code>C</code>编写的文件，可能就是<code>native</code>方法所调用的<code>C</code>代码。</p><h2 id="堆-Java-Heap"><a href="#堆-Java-Heap" class="headerlink" title="堆(Java Heap)"></a>堆(Java Heap)</h2><p>堆是<code>Java</code>虚拟机管理内存最大的一块内存区域，因为堆存放的对象是线程共享的，所以多线程的时候也需要同步机制。<code>Java</code>堆是被所有线程共享的一块内存区域，在虚拟机启动时创建。此内存区域的唯一作用就是存放对象实例，几乎所有的对象实例都在这里分配内存。</p><p><code>Java</code>虚拟机规范中的描述是: 所有的对象实例以及数组都要在堆上分配，但是随着<code>JIT</code>编译器的发展与逃逸分析技术逐断成熟，栈上分配、标量替换优化技术将会导致一些微妙的变化发生，所有的对象都分配在堆上也渐渐变得不是那么“绝对”了。</p><blockquote><p>即时编译器: 可以把<code>Java</code>的字节码，包括需要被解释的指令的程序转换成可以直接发送给处理器的指令的程序)</p><p>逃逸分析: 通过逃逸分析来决定某些实例或者变量是否要在堆中进行分配，如果开启了逃逸分析，即可将这些变量直接在栈上进行分配，而非堆上进行分配。这些变量的指针可以被全局所引用，或者其其它线程所引用。</p></blockquote><p><code>Java</code>堆是垃圾收集器管理的主要区域，因此很多时候也被称做“<code>GC</code>堆”。从内存回收的角度来看，由于收集器基本都采用分代收集算法，所以<code>Java</code>堆中还可以细分为: 新生代和老年代，再细致一点的有<code>Eden</code>空间、<code>From Survivor</code>空间、<code>To Survivor</code>空间等。</p><p>根据<code>Java</code>虛拟机规范的规定，<code>Java</code> 堆可以处于物理上不连续的内存空间中，只要逻辑上是连续的即可，就像我们的磁盘空间一样。在实现时，既可以实现成固定大小的，也可以是可扩展的，不过当前主流的虚拟机都是按照可扩展来实现的(通过<code>-Xmx</code>和<code>-Xms</code>控制)。如果堆中没有内存完成实例分配，而且堆无法扩展将报<code>OOM</code>错误(<code>OutOfMemoryError</code>)。</p><h2 id="方法区-Method-Area"><a href="#方法区-Method-Area" class="headerlink" title="方法区(Method Area)"></a>方法区(Method Area)</h2><p>方法区同堆一样，是所有线程共享的内存区域，为了区分堆，又被称为非堆。</p><p>方法区用于存储已被虚拟机加载的类信息、常量、静态变量，如<code>static</code>修饰的变量加载类的时候就被加载到方法区中。</p><blockquote><p><strong>运行时常量池</strong>(<code>Runtime Constant Pool</code>)是方法区的一部分，<code>class</code>文件除了有类的字段、接口、方法等描述信息之外，还有常量池(<code>Constant Pool Table</code>)用于存放编译期间生成的各种字面量和符号引用，这部分内容将在类加载后进人方法区的运行时常量池中存放。</p></blockquote><p>在老版<code>JDK</code>，方法区也被称为永久代。因为没有强制要求方法区必须实现垃圾回收，<code>HotSpot</code>虚拟机以永久代来实现方法区，从而<code>JVM</code>的垃圾收集器可以像管理堆区一样管理这部分区域，从而不需要专门为这部分设计垃圾回收机制。不过自从<code>JDK7</code>之后，<code>Hotspot</code>虚拟机便将运行时常量池从永久代移除了。<code>JDK8</code>真正开始废弃永久代，使用元空间(<code>Metaspace</code>)替代。</p><h2 id="直接内存-Direct-Memory"><a href="#直接内存-Direct-Memory" class="headerlink" title="直接内存(Direct Memory)"></a>直接内存(Direct Memory)</h2><p>直接内存并不是虚拟机运行时数据区的一部分，也不是虚拟机规范中定义的内存区域。但是这部分内存也被频繁地使用，而且也可能导致<code>OutOfMemoryError</code>异常的出现.</p><p>在<code>JDK 1.4</code>中新加人了<code>NIO</code> (<code>New Input/Output</code>)类，引人了一种基于通道(<code>Channel</code> 与缓冲区(<code>Buffer</code>) 的<code>IO</code>方式，它可以使用<code>Native</code>函数库直接分配堆外内存，然后通过一个存储在<code>Java</code>堆中的<code>DirectByteBuffer</code>对象作为这块内存的引用进行操作。这样能在一些场景中显著提高性能，因为它避免了在<code>Java</code>堆和<code>Native</code>堆中来回复制数据。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>Java</code>虚拟机管理的内存分为<strong>方法区、堆、虚拟机栈、本地方法栈、程序计数器栈</strong>五大区域。</p><p>程序计数器是一块很小的内存空间，它是线程私有的，可以认作为当前线程的行号指示器。</p><p><code>Java</code>栈同计数器也为线程私有，生命周期相同，就是平时说的栈，<strong>栈描述的是<code>Java</code>方法执行的内存模型</strong>。</p><p>本地方法栈是与虚拟机栈发挥的作用十分相似，区别是虚拟机栈执行的是<code>Java</code>方法(也就是字节码)，而本地方法栈则为虚拟机使用到的<code>native</code>方法服务.</p><p>堆是<code>Java</code>虚拟机管理内存最大的一块内存区域，因为堆存放的对象是线程共享的，所以多线程的时候也需要同步机制，几乎所有的对象实例都在这里分配内存。</p><p>直接内存并不是虚拟机运行时数据区的一部分，也不是虚拟机规范中定义的内存区域，但它的存在能在一些场景中显著提高性能。</p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E5%90%8E%E7%AB%AF/" class="category-chain-item">后端</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Java%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/" class="print-no-link">#Java内存结构</a></div></div><div class="license-box my-3"><div class="license-title"><div>Java的内存结构</div><div>https://muchen.fun/passages/java-memory-structure/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>沐晨</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2019年12月18日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/passages/design-pattern-learn-19/" title="设计模式之美学习（十九）"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">设计模式之美学习（十九）</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/passages/design-pattern-learn-18/" title="设计模式之美学习（十八）"><span class="hidden-mobile">设计模式之美学习（十八）</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script>Fluid.utils.loadComments("#valine",function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.4.16/Valine.min.js",function(){var i=Object.assign({appId:"O8vCwRAgytvziX1uG5WgRn8R-MdYXbMMI",appKey:"5Rl3Rhl9zc8BJNvrPcncKWFy",path:"window.location.pathname",placeholder:"说点什么吧~",avatar:"retro",meta:["nick","mail","link"],requiredFields:[],pageSize:10,lang:"zh-CN",highlight:!0,recordIP:!0,serverURLs:"https://lean.muchen.fun",emojiCDN:null,emojiMaps:null,enableQQ:!1},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{var i="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,t=t.getElementById("subtitle");t&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>var relativeDate=function(){var t,e,i,n=document.getElementById("updated-time");n&&((i=(t=n.textContent).match(e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|[+-]\d{2}:\d{2})/))&&(i=moment(i[0]).fromNow(),n.textContent=t.replace(e,i)),n.style.display="")};Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/moment.min.js",function(){"zh-cn".startsWith("en")?relativeDate():Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/locale/zh-cn.min.js",function(){relativeDate()})})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback(function(){if("anchors"in window){anchors.removeAll();var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}})})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>