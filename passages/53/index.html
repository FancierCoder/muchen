<!DOCTYPE html>
<html lang="zh-CN">





<head>
    <meta charset="UTF-8">
    <link rel="apple-touch-icon" sizes="76x76" href="https://static.muchen.fun/images/touch-icon.png">
    <link rel="icon" type="image/png" href="https://static.muchen.fun/images/favicon.ico">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    
    <meta name="theme-color" content="#2f4154">
    <meta name="description" content="沐晨的个人博客,技术博客">
    <meta name="author" content="Li Duo">
    <meta name="keywords" content="个人博客,个人见解,Java,Spring,IT,程序员,编程,技术,SpringBoot,JavaScript,分享,博客,Blog">
    <title>53.算法实战（五） - MuChen&#39;s Blog</title>

    <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />
<link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />


    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_fmb4a04yx8h.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">




<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

    
<link rel="stylesheet" href="https://static.muchen.fun/css/custom.css?t=0.1423425.css">



<meta name="generator" content="Hexo 4.2.0"></head>


<body>
<script>
    var isNight = new Date().getHours() >= 22 || new Date().getHours() < 7; // 指定时间
    // 依次判断 系统暗黑模式 指定时间 缓存 dark
    if (matchMedia('(prefers-color-scheme: dark)').matches || isNight || localStorage.getItem('dark') === '1') {
        if (!(isNight && localStorage.getItem('noDark') === '1')) {
            document.body.classList.add('dark');
        }
    }
    document.getElementById('dark').innerHTML = document.querySelector("body").classList.contains("dark") ? "🌙" : "☀";
</script>
<header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="container">
        <a class="navbar-brand"
           href="/">&nbsp;<strong>沐晨</strong>&nbsp;</a>

        <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <div class="animated-icon"><span></span><span></span><span></span></div>
        </button>

        <!-- Collapsible content -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto text-center">
                
                    
                    
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/archives/">
                            <i class="iconfont icon-archive-fill"></i>
                            归档</a>
                    </li>
                
                    
                    
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/categories/">
                            <i class="iconfont icon-category-fill"></i>
                            分类</a>
                    </li>
                
                    
                    
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/tags/">
                            <i class="iconfont icon-tags-fill"></i>
                            标签</a>
                    </li>
                
                    
                    
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/messageBoard/">
                            <i class="iconfont icon-speakernotes"></i>
                            留言</a>
                    </li>
                
                    
                    
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/about/">
                            <i class="iconfont icon-user-fill"></i>
                            关于</a>
                    </li>
                
                    
                    
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/links/">
                            <i class="iconfont icon-link-fill"></i>
                            友链</a>
                    </li>
                
                
                    <li class="nav-item" id="search-btn">
                        <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                                    class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
                    </li>
                
                <li class="nav-item">
                    <a id="dark" class="nav-link" onclick="switchDarkMode()">
                        <i class="iconfont icon-sun"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/images/07.jpg') no-repeat center center;
                 background-size: cover;">
        <div class="full-bg-img">
            <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
                <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
                
            </span>

                    
                        
                            <div class="mt-3 post-meta">
                                <i class="iconfont icon-date-fill" aria-hidden="true"></i>
                                <time datetime="2019-08-29 13:11">
                                    2019年8月29日 下午
                                </time>
                            </div>
                        

                        <div class="mt-1">
                            
                                
                                <span class="post-meta mr-2">
                    <i class="iconfont icon-chart"></i>
                    4.2k 字
                  </span>
                            

                            
                                
                                <span class="post-meta mr-2">
                      <i class="iconfont icon-clock-fill"></i>
                                    
                                    
                                    53
                                     分钟
                  </span>
                            

                            
                                <!-- 不蒜子统计文章PV -->
                                
                                <span id="busuanzi_container_page_pv" class="post-meta" style="display: none">
                    <i class="iconfont icon-eye" aria-hidden="true"></i>
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>
                            
                        </div>
                    
                </div>

                
            </div>
        </div>
    </div>
</header>

<main>
    
        

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
              <p class="note note-info">
                
                  本文最后更新于：8 个月前
                
              </p>
            
            <article class="markdown-body">
              <!-- more -->
<p>短网址服务你用过吗？如果在微博里发布一条带网址的信息，微博会把里面的网址转化成一个更短的网址。只要访问这个短网址，就相当于访问原始的网址。比如下面这两个网址，尽管长度不同，但是都可以跳转到我的 <code>GitHub</code> 里。其中，第二个网址就是通过新浪提供的短网址服务生成的。</p>
<pre><code class="hljs java">原始网址：https:<span class="hljs-comment">//github.com/FancierCoder</span>
短网址：http:<span class="hljs-comment">//t.cn/Ai8EY5h7</span></code></pre>
<p>从功能上讲，短网址服务其实非常简单，就是把一个长的网址转化成一个短的网址。作为一名软件工程师，你是否思考过，这样一个简单的功能，是如何实现的呢？底层都依赖了哪些数据结构和算法呢？</p>
<h2 id="短网址服务整体介绍"><a href="#短网址服务整体介绍" class="headerlink" title="短网址服务整体介绍"></a>短网址服务整体介绍</h2><p>刚刚讲了短网址服务的一个核心功能，就是把原始的长网址转化成短网址。除了这个功能之外，短网址服务还有另外一个必不可少的功能。那就是，当用户点击短网址的时候，短网址服务会将浏览器重定向为原始网址。这个过程是如何实现的呢？</p>
<p>为了方便理解，下面有一张对比图，你可以看下。<br><img src="https://muchen-img.oss-cn-hongkong.aliyuncs.com/hexo-client/2019/08/29/1ebff400-ca0e-11e9-9613-1df66a9dd690.png" srcset="/img/loading.gif" alt="image.png"><br>从图中可以看出，浏览器会先访问短网址服务，通过短网址获取到原始网址，再通过原始网址访问到页面。不过这部分功能并不是要讲的重点。重点来看，如何将长网址转化成短网址？</p>
<h2 id="如何通过哈希算法生成短网址？"><a href="#如何通过哈希算法生成短网址？" class="headerlink" title="如何通过哈希算法生成短网址？"></a>如何通过哈希算法生成短网址？</h2><p>哈希算法可以将一个不管多长的字符串，转化成一个长度固定的哈希值。可以利用哈希算法，来生成短网址。</p>
<p>前面已经提过一些哈希算法了，比如 <code>MD5</code>、<code>SHA</code> 等。但是，实际上，并不需要这些复杂的哈希算法。在生成短网址这个问题上，毕竟不需要考虑反向解密的难度，所以只需要关心哈希算法的计算速度和冲突概率。</p>
<p>能够满足这样要求的哈希算法有很多，其中比较著名并且应用广泛的一个哈希算法，那就是 <code>MurmurHash</code> 算法。尽管这个哈希算法在 <code>2008</code> 年才被发明出来，但现在它已经广泛应用到 <code>Redis</code>、<code>MemCache</code>、<code>Cassandra</code>、<code>HBase</code>、<code>Lucene</code> 等众多著名的软件中。</p>
<p><code>MurmurHash</code> 算法提供了两种长度的哈希值，一种是 <code>32bits</code>，一种是 <code>128bits</code>。为了让最终生成的短网址尽可能短，可以选择 <code>32bits</code> 的哈希值。对于开头那个 <code>GitHub</code> 网址，假设经过 <code>MurmurHash</code> 计算后，得到的哈希值就是 <code>181338494</code>。再拼上短网址服务的域名，就变成了最终的短网址 <code>http://t.cn/181338494</code>（其中，<code>http://t.cn</code> 是短网址服务的域名）。</p>
<h3 id="1-如何让短网址更短？"><a href="#1-如何让短网址更短？" class="headerlink" title="1. 如何让短网址更短？"></a>1. 如何让短网址更短？</h3><p>不过，你可能已经看出来了，通过 <code>MurmurHash</code> 算法得到的短网址还是很长啊，而且跟开头那个网址的格式好像也不一样。别着急，只需要稍微改变一个哈希值的表示方法，就可以轻松把短网址变得更短些。</p>
<p>可以将 <code>10</code> 进制的哈希值，转化成更高进制的哈希值，这样哈希值就变短了。<code>16</code> 进制中，用 <code>A～F</code>，来表示 <code>10～15</code>。在网址 <code>URL</code> 中，常用的合法字符有 <code>0～9</code>、<code>a～z</code>、<code>A～Z</code> 这样 <code>62</code> 个字符。为了让哈希值表示起来尽可能短，可以将 <code>10</code> 进制的哈希值转化成 <code>62</code> 进制。具体的计算过程，写在下面了。最终用 <code>62</code> 进制表示的短网址就是 <code>http://t.cn/cgSqq</code>。<br><img src="https://muchen-img.oss-cn-hongkong.aliyuncs.com/hexo-client/2019/08/29/fee4c830-ca0e-11e9-9613-1df66a9dd690.png" srcset="/img/loading.gif" alt="image.png"></p>
<h3 id="2-如何解决哈希冲突问题？"><a href="#2-如何解决哈希冲突问题？" class="headerlink" title="2. 如何解决哈希冲突问题？"></a>2. 如何解决哈希冲突问题？</h3><p>不过，前面讲过，哈希算法无法避免的一个问题，就是哈希冲突。尽管 <code>MurmurHash</code> 算法冲突的概率非常低。但是，一旦冲突，就会导致两个原始网址被转化成同一个短网址。当用户访问短网址的时候，就无从判断，用户想要访问的是哪一个原始网址了。这个问题该如何解决呢？</p>
<p>一般情况下，会保存短网址跟原始网址之间的对应关系，以便后续用户在访问短网址的时候，可以根据对应关系，查找到原始网址。存储这种对应关系的方式有很多，比如自己设计存储系统或者利用现成的数据库。前面讲到的数据库有 <code>MySQL</code>、<code>Redis</code>。就拿 <code>MySQL</code> 来举例。假设短网址与原始网址之间的对应关系，就存储在 <code>MySQL</code> 数据库中。</p>
<p>当有一个新的原始网址需要生成短网址的时候，先利用 <code>MurmurHash</code> 算法，生成短网址。然后，拿这个新生成的短网址，在 <code>MySQL</code> 数据库中查找。</p>
<p>如果没有找到相同的短网址，这也就表明，这个新生成的短网址没有冲突。于是就将这个短网址返回给用户（请求生成短网址的用户），然后将这个短网址与原始网址之间的对应关系，存储到 <code>MySQL</code> 数据库中。</p>
<p>如果在数据库中，找到了相同的短网址，那也并不一定说明就冲突了。从数据库中，将这个短网址对应的原始网址也取出来。如果数据库中的原始网址，跟现在正在处理的原始网址是一样的，这就说明已经有人请求过这个原始网址的短网址了。就可以拿这个短网址直接用。如果数据库中记录的原始网址，跟正在处理的原始网址不一样，那就说明哈希算法发生了冲突。不同的原始网址，经过计算，得到的短网址重复了。这个时候，该怎么办呢？</p>
<p>可以给原始网址拼接一串特殊字符，比如“[DUPLICATED]”，然后跟再重新计算哈希值，两次哈希计算都冲突的概率，显然是非常低的。假设出现非常极端的情况，又发生冲突了，可以再换一个拼接字符串，比如“[OHMYGOD]”，再计算哈希值。然后把计算得到的哈希值，跟原始网址拼接了特殊字符串之后的文本，一并存储在 <code>MySQL</code> 数据库中。</p>
<p>当用户访问短网址的时候，短网址服务先通过短网址，在数据库中查找到对应的原始网址。如果原始网址有拼接特殊字符（这个很容易通过字符串匹配算法找到），就先将特殊字符去掉，然后再将不包含特殊字符的原始网址返回给浏览器。</p>
<h3 id="3-如何优化哈希算法生成短网址的性能？"><a href="#3-如何优化哈希算法生成短网址的性能？" class="headerlink" title="3. 如何优化哈希算法生成短网址的性能？"></a>3. 如何优化哈希算法生成短网址的性能？</h3><p>为了判断生成的短网址是否冲突，需要拿生成的短网址，在数据库中查找。如果数据库中存储的数据非常多，那查找起来就会非常慢，势必影响短网址服务的性能。那有没有什么优化的手段呢？</p>
<p>还记得之前讲的 <code>MySQL</code> 数据库索引吗？可以给短网址字段添加 <code>B+</code> 树索引。这样通过短网址查询原始网址的速度就提高了很多。实际上，在真实的软件开发中，还可以通过一个小技巧，来进一步提高速度。</p>
<p>在短网址生成的过程中，会跟数据库打两次交道，也就是会执行两条 <code>SQL</code> 语句。第一个 <code>SQL</code> 语句是通过短网址查询短网址与原始网址的对应关系，第二个 <code>SQL</code> 语句是将新生成的短网址和原始网址之间的对应关系存储到数据库。</p>
<p>一般情况下，数据库和应用服务（只做计算不存储数据的业务逻辑部分）会部署在两个独立的服务器或者虚拟服务器上。那两条 <code>SQL</code> 语句的执行就需要两次网络通信。这种 <code>IO</code> 通信耗时以及 <code>SQL</code> 语句的执行，才是整个短网址服务的性能瓶颈所在。所以，为了提高性能，需要尽量减少 <code>SQL</code> 语句。那又该如何减少 <code>SQL</code> 语句呢？</p>
<p>可以给数据库中的短网址字段，添加一个唯一索引（不止是索引，还要求表中不能有重复的数据）。当有新的原始网址需要生成短网址的时候，并不会先拿生成的短网址，在数据库中查找判重，而是直接将生成的短网址与对应的原始网址，尝试存储到数据库中。如果数据库能够将数据正常写入，那说明并没有违反唯一索引，也就是说，这个新生成的短网址并没有冲突。</p>
<p>当然，如果数据库反馈违反唯一性索引异常，那还得重新执行刚刚讲过的“查询、写入”过程，<code>SQL</code> 语句执行的次数不减反增。但是，在大部分情况下，把新生成的短网址和对应的原始网址，插入到数据库的时候，并不会出现冲突。所以，大部分情况下，只需要执行一条写入的 <code>SQL</code> 语句就可以了。所以，从整体上看，总的 <code>SQL</code> 语句执行次数会大大减少。</p>
<p>实际上，还有另外一个优化 <code>SQL</code> 语句次数的方法，那就是借助布隆过滤器。</p>
<p>把已经生成的短网址，构建成布隆过滤器。布隆过滤器是比较节省内存的一种存储结构，长度是 <code>10</code> 亿的布隆过滤器，也只需要 <code>125MB</code> 左右的内存空间。</p>
<p>当有新的短网址生成的时候，先拿这个新生成的短网址，在布隆过滤器中查找。如果查找的结果是不存在，那就说明这个新生成的短网址并没有冲突。这个时候，只需要再执行写入短网址和对应原始网页的 <code>SQL</code> 语句就可以了。通过先查询布隆过滤器，总的 <code>SQL</code> 语句的执行次数减少了。</p>
<p>到此，利用哈希算法来生成短网址的思路，就讲完了。实际上，这种解决思路已经完全满足需求了，已经可以直接用到真实的软件开发中。不过，还有另外一种短网址的生成算法，那就是利用自增的 <code>ID</code> 生成器来生成短网址。接下来就看一下，这种算法是如何工作的？对于哈希算法生成短网址来说，它又有什么优势和劣势？</p>
<h2 id="如何通过-ID-生成器生成短网址？"><a href="#如何通过-ID-生成器生成短网址？" class="headerlink" title="如何通过 ID 生成器生成短网址？"></a>如何通过 ID 生成器生成短网址？</h2><p>可以维护一个 <code>ID</code> 自增生成器。它可以生成 <code>1</code>、<code>2</code>、<code>3</code>…这样自增的整数 <code>ID</code>。当短网址服务接收到一个原始网址转化成短网址的请求之后，它先从 <code>ID</code> 生成器中取一个号码，然后将其转化成 <code>62</code> 进制表示法，拼接到短网址服务的域名（比如<code>http://t.cn/</code>）后面，就形成了最终的短网址。最后，还是会把生成的短网址和对应的原始网址存储到数据库中。</p>
<p>理论非常简单好理解。不过，这里有几个细节问题需要处理。</p>
<h3 id="1-相同的原始网址可能会对应不同的短网址"><a href="#1-相同的原始网址可能会对应不同的短网址" class="headerlink" title="1. 相同的原始网址可能会对应不同的短网址"></a>1. 相同的原始网址可能会对应不同的短网址</h3><p>每次新来一个原始网址，就生成一个新的短网址，这种做法就会导致两个相同的原始网址生成了不同的短网址。这个该如何处理呢？实际上，有两种处理思路。</p>
<p>第一种处理思路是<strong>不做处理</strong>。听起来有点无厘头，稍微解释下就明白了。实际上，相同的原始网址对应不同的短网址，用户是可以接受的。在大部分短网址的应用场景里，用户只关心短网址能否正确地跳转到原始网址。至于短网址长什么样子，其实根本就不关心。所以，即便是同一个原始网址，两次生成的短网址不一样，也并不会影响到用户的使用。</p>
<p>第二种处理思路是<strong>借助哈希算法生成短网址的处理思想</strong>，当要给一个原始网址生成短网址的时候，要先拿原始网址在数据库中查找，看数据库中是否已经存在相同的原始网址了。如果数据库中存在，那就取出对应的短网址，直接返回给用户。</p>
<p>不过，这种处理思路有个问题，需要给数据库中的短网址和原始网址这两个字段，都添加索引。短网址上加索引是为了提高用户查询短网址对应的原始网页的速度，原始网址上加索引是为了加快刚刚讲的通过原始网址查询短网址的速度。这种解决思路虽然能满足“相同原始网址对应相同短网址”这样一个需求，但是是有代价的：一方面两个索引会占用更多的存储空间，另一方面索引还会导致插入、删除等操作性能的下降。</p>
<h3 id="2-如何实现高性能的-ID-生成器？"><a href="#2-如何实现高性能的-ID-生成器？" class="headerlink" title="2. 如何实现高性能的 ID 生成器？"></a>2. 如何实现高性能的 ID 生成器？</h3><p>实现 <code>ID</code> 生成器的方法有很多，比如利用数据库自增字段。当然也可以自己维护一个计数器，不停地加一加一。但是，一个计数器来应对频繁的短网址生成请求，显然是有点吃力的（因为计数器必须保证生成的 <code>ID</code> 不重复，笼统概念上讲，就是需要加锁）。如何提高 <code>ID</code> 生成器的性能呢？关于这个问题，实际上，有很多解决思路。这里给出两种思路。</p>
<p>第一种思路是借助<a href="../52/">第 52 篇</a>中讲的方法。可以给 <code>ID</code> 生成器装多个前置发号器。批量地给每个前置发号器发送 <code>ID</code> 号码。当接受到短网址生成请求的时候，就选择一个前置发号器来取号码。这样通过多个前置发号器，明显提高了并发发号的能力。<br><img src="https://muchen-img.oss-cn-hongkong.aliyuncs.com/hexo-client/2019/08/29/0c55d430-ca1b-11e9-9613-1df66a9dd690.png" srcset="/img/loading.gif" alt="image.png"><br>第二种思路跟第一种差不多。不过，不再使用一个 <code>ID</code> 生成器和多个前置发号器这样的架构，而是，直接实现多个 <code>ID</code> 生成器同时服务。为了保证每个 <code>ID</code> 生成器生成的 <code>ID</code> 不重复。要求每个 <code>ID</code> 生成器按照一定的规则，来生成 <code>ID</code> 号码。比如，第一个 <code>ID</code> 生成器只能生成尾号为 <code>0</code> 的，第二个只能生成尾号为 <code>1</code> 的，以此类推。这样通过多个 <code>ID</code> 生成器同时工作，也提高了 <code>ID</code> 生成的效率。<br><img src="https://muchen-img.oss-cn-hongkong.aliyuncs.com/hexo-client/2019/08/29/2f6ed070-ca1b-11e9-9613-1df66a9dd690.png" srcset="/img/loading.gif" alt="image.png"></p>
<h2 id="总结引申"><a href="#总结引申" class="headerlink" title="总结引申"></a>总结引申</h2><p>上面讲了短网址服务的两种实现方法。现在来稍微总结一下。</p>
<p>第一种实现思路是通过哈希算法生成短网址。采用计算速度快、冲突概率小的 <code>MurmurHash</code> 算法，并将计算得到的 <code>10</code> 进制数，转化成 <code>62</code> 进制表示法，进一步缩短短网址的长度。对于哈希算法的哈希冲突问题，通过给原始网址添加特殊前缀字符，重新计算哈希值的方法来解决。</p>
<p>第二种实现思路是通过 <code>ID</code> 生成器来生成短网址。维护一个 <code>ID</code> 自增的 <code>ID</code> 生成器，给每个原始网址分配一个 <code>ID</code> 号码，并且同样转成 <code>62</code> 进制表示法，拼接到短网址服务的域名之后，形成最终的短网址。</p>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><ul>
<li><p>如果还要额外支持用户自定义短网址功能（<code>http//t.cn/{用户自定部分}</code>），又该如何改造刚刚的算法呢?</p>
</li>
<li><p>在讲通过 <code>ID</code> 生成器生成短网址这种实现思路的时候，讲到相同的原始网址可能会对应不同的短网址。针对这个问题，其中一个解决思路就是，不做处理。但是，如果每个请求都生成一个短网址，并且存储在数据库中，那这样会不会撑爆数据库呢？又该如何解决呢？</p>
</li>
</ul>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E7%AE%97%E6%B3%95%E5%AE%9E%E6%88%98/">算法实战</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
                    
                      <a class="hover-with-bg" href="/tags/%E7%AE%97%E6%B3%95/">算法</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" rel="nofollow noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/passages/leetcode-array-and-list/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">LeetCode刷题：数组和链表</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/passages/the-common-oper-of-single-list/">
                        <span class="hidden-mobile">单向链表的常见操作</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
              <!-- Comments -->
              <div class="comments" id="comments">
                
                
    <div id="vcomments"></div>
    <script defer src="https://cdn.staticfile.org/valine/1.4.14/Valine.min.js" ></script>

    <script type="text/javascript">
        var oldLoadVa = window.onload;
        window.onload = function () {
            oldLoadVa && oldLoadVa();

            new Valine({
                el: "#vcomments",
                app_id: "O8vCwRAgytvziX1uG5WgRn8R-MdYXbMMI",
                app_key: "5Rl3Rhl9zc8BJNvrPcncKWFy",
                placeholder: "说点什么吧~",
                path: window.location.pathname,
                avatar: "retro",
                meta: ["nick","mail","link"],
                pageSize: "10",
                lang: "zh-CN",
                highlight: true,
                recordIP: true,
                serverURLs: "https://lean.muchen.fun",
            });
        };
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://valine.js.org" rel="nofollow noopener">comments
            powered by Valine.</a></noscript>


              </div>
            
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>

<!-- Custom -->

  <div class="col-lg-7 mx-auto nopadding-md">
    <div class="container custom post-content mx-auto">
      <img src="https://static.muchen.fun/images/weixin_mp.jpg" srcset="/img/loading.gif" class="rounded mx-auto d-block mt-5" style="width:150px; height:150px;"><br><div class="text-center">欢迎关注我的公众号</div>
    </div>
  </div>


    
</main>


    <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>



    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
                <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body mx-3">
                <div class="md-form mb-5">
                    <input type="text" id="local-search-input" class="form-control validate">
                    <label data-error="x"
                           data-success="v"
                           for="local-search-input">关键词</label>
                </div>
                <div class="list-group" id="local-search-result"></div>
            </div>
        </div>
    </div>
</div>







<footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    <div>
      <span id="timeDate">载入天数...</span>
      <span id="times">载入时分秒...</span>
      <script>
        var now = new Date();

        function createtime() {
          var grt = new Date("07/12/2019 00:00:00");//此处修改你的建站时间或者网站上线时间
          now.setTime(now.getTime() + 250);
          days = (now - grt) / 1000 / 60 / 60 / 24;
          dnum = Math.floor(days);
          hours = (now - grt) / 1000 / 60 / 60 - (24 * dnum);
          hnum = Math.floor(hours);
          if (String(hnum).length == 1) {
            hnum = "0" + hnum;
          }
          minutes = (now - grt) / 1000 / 60 - (24 * 60 * dnum) - (60 * hnum);
          mnum = Math.floor(minutes);
          if (String(mnum).length == 1) {
            mnum = "0" + mnum;
          }
          seconds = (now - grt) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
          snum = Math.round(seconds);
          if (String(snum).length == 1) {
            snum = "0" + snum;
          }
          document.getElementById("timeDate").innerHTML = "本站已运行&nbsp" + dnum + "&nbsp天";
          document.getElementById("times").innerHTML = hnum + "&nbsp小时&nbsp" + mnum + "&nbsp分&nbsp" + snum + "&nbsp秒";
        }

        setInterval("createtime()", 250);
      </script>
    </div>
    <p id="hitokoto">:D 获取中...</p>
    <script>
      fetch('https://v1.hitokoto.cn')
              .then(response => response.json())
              .then(data => {
                const hitokoto = document.getElementById('hitokoto')
                hitokoto.innerText = data.hitokoto + '--「' + data.from + '」'
              })
              .catch(console.error)
    </script>
    

    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/main.js" ></script>


    <script  src="/js/lazyload.js" ></script>



    




    <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
    <script  src="/js/clipboard-use.js" ></script>



    <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>



    
<script src="https://static.muchen.fun/js/custom.js"></script>



<!-- Plugins -->


    
        <!-- Baidu Analytics -->
        <script defer>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?b561ebd1192170893b7c07a8d4b71fc5";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
    

    
        <!-- Google Analytics -->
        <script defer>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-144841374-1', 'auto');
            ga('send', 'pageview');
        </script>
    

    

    

    

    



    <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
    <script>
        var typed = new Typed('#subtitle', {
            strings: [
                '  ',
                "53.算法实战（五）&nbsp;",
            ],
            cursorChar: "_",
            typeSpeed: 60,
            loop: false,
        });
        typed.stop();
        $(document).ready(function () {
            $(".typed-cursor").addClass("h2");
            typed.start();
        });
    </script>



    <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
    <script>
        anchors.options = {
            placement: "right",
            visible: "hover",
            
        };
        var el = "h1,h2,h3,h4,h5,h6".split(",");
        var res = [];
        for (item of el) {
            res.push(".markdown-body > " + item)
        }
        anchors.add(res.join(", "))
    </script>



    <script  src="/js/local-search.js" ></script>
    <script>
        var path = "/local-search.xml";
        var inputArea = document.querySelector("#local-search-input");
        inputArea.onclick = function () {
            searchFunc(path, 'local-search-input', 'local-search-result');
            this.onclick = null
        }
    </script>



    <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
    <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

    <script>
        $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
            function () {
                var element = document.createElement('a');
                $(element).attr('data-fancybox', 'images');
                $(element).attr('href', $(this).attr('src'));
                $(this).wrap(element);
            }
        );
    </script>





    

    
        <!-- MathJax -->
        <script>
            MathJax = {
                tex: {
                    inlineMath: [['$', '$'], ['\\(', '\\)']]
                },
                options: {
                    renderActions: {
                        findScript: [10, doc => {
                            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                                const display = !!node.type.match(/; *mode=display/);
                                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                                const text = document.createTextNode('');
                                node.parentNode.replaceChild(text, node);
                                math.start = {node: text, delim: '', n: 0};
                                math.end = {node: text, delim: '', n: 0};
                                doc.math.push(math);
                            });
                        }, '', false],
                        insertedScript: [200, () => {
                            document.querySelectorAll('mjx-container').forEach(node => {
                                let target = node.parentNode;
                                if (target.nodeName.toLowerCase() === 'li') {
                                    target.parentNode.classList.add('has-jax');
                                }
                            });
                        }, '', false]
                    }
                }
            };
        </script>

        <script async src="https://cdn.staticfile.org/mathjax/3.0.5/es5/tex-svg.js" ></script>

    



    
    
        <script>
            !function (e, t, a) {
                function r() {
                    for (var e = 0; e < s.length; e++) s[e].alpha <= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = "left:" + s[e].x + "px;top:" + s[e].y + "px;opacity:" + s[e].alpha + ";transform:scale(" + s[e].scale + "," + s[e].scale + ") rotate(45deg);background:" + s[e].color + ";z-index:99999");
                    requestAnimationFrame(r)
                }

                function n() {
                    var t = "function" == typeof e.onclick && e.onclick;
                    e.onclick = function (e) {
                        t && t(), o(e)
                    }
                }

                function o(e) {
                    var a = t.createElement("div");
                    a.className = "heart", s.push({
                        el: a,
                        x: e.clientX - 5,
                        y: e.clientY - 5,
                        scale: 1,
                        alpha: 1,
                        color: c()
                    }), t.body.appendChild(a)
                }

                function i(e) {
                    var a = t.createElement("style");
                    a.type = "text/css";
                    try {
                        a.appendChild(t.createTextNode(e))
                    } catch (t) {
                        a.styleSheet.cssText = e
                    }
                    t.getElementsByTagName("head")[0].appendChild(a)
                }

                function c() {
                    return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
                }

                var s = [];
                e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) {
                    setTimeout(e, 1e3 / 60)
                }, i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), n(), r()
            }(window, document);
        </script>
    












</body>
</html>
